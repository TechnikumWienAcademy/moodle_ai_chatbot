{"version":3,"file":"mod_settings.min.js","sources":["../src/mod_settings.js"],"sourcesContent":["export const init = (data) => {\n\n    if (data['allowinstancesettings'] == false) {\n        document.querySelector('#id_openaichatsettings').style.display = \"none\";\n        document.querySelector('#id_assistantheading').style.display = \"none\";\n        document.querySelector('#id_chatheading').style.display = \"none\";\n        document.querySelector('#id_advanced').style.display = \"none\";\n    } else {\n        //at the first loading of the page.\n        switch_type_display();\n        document.querySelector('#id_type').addEventListener('change', e => {\n            switch_type_display();\n        })\n\n        $(\"#id_apikey\").change(function() {\n            var apikey = $(this).val()\n            $.ajax({\n                method: \"POST\",\n                url: `${M.cfg.wwwroot}/mod/openaichat/api/get_assistants.php`,\n                data: {\"apikey\" : apikey},\n                dataType: \"text\",\n                success: function(result){\n                    //here do what I want\n                    $(\"#id_assistant\").empty();\n                    let object = JSON.parse(result)\n                    if($.isEmptyObject(object['error'])) {\n                        $.each(object['data'], function( index, value ){\n                            $('#id_assistant').append($('<option>', {\n                                value: value['id'],\n                                text: value['name']\n                            }));\n                        });\n                    } else {\n                        alert(\"Invalid API key!\")\n                    }\n                }\n            })\n        })\n\n        function switch_type_display() {\n            if (document.querySelector('#id_type').value == \"chat\") {\n                document.querySelector('#id_assistantheading').style.display = \"none\";\n                document.querySelector('#id_chatheading').style.display = \"block\";\n                document.querySelector(\"#fitem_id_model\").style.display = \"flex\";\n                document.querySelector(\"#fitem_id_temperature\").style.display = \"flex\";\n                document.querySelector(\"#fitem_id_maxlength\").style.display = \"flex\";\n                document.querySelector(\"#fitem_id_topp\").style.display = \"flex\";\n                document.querySelector(\"#fitem_id_frequency\").style.display = \"flex\";\n                document.querySelector(\"#fitem_id_presence\").style.display = \"flex\";\n                document.querySelector('#id_advanced').style.display = \"block\";\n            } else {\n                document.querySelector('#id_chatheading').style.display = \"none\";\n                document.querySelector('#id_assistantheading').style.display = \"block\";\n                document.querySelector(\"#fitem_id_model\").style.display = \"none\";\n                document.querySelector(\"#fitem_id_temperature\").style.display = \"none\";\n                document.querySelector(\"#fitem_id_maxlength\").style.display = \"none\";\n                document.querySelector(\"#fitem_id_topp\").style.display = \"none\";\n                document.querySelector(\"#fitem_id_frequency\").style.display = \"none\";\n                document.querySelector(\"#fitem_id_presence\").style.display = \"none\";\n                document.querySelector('#id_advanced').style.display = \"none\";\n            }\n        }\n    }\n}"],"names":["data","document","querySelector","style","display","switch_type_display","value","addEventListener","e","$","change","apikey","this","val","ajax","method","url","M","cfg","wwwroot","dataType","success","result","empty","object","JSON","parse","isEmptyObject","each","index","append","text","alert"],"mappings":"gKAAqBA,UAEoB,GAAjCA,KAAI,sBACJC,SAASC,cAAc,0BAA0BC,MAAMC,QAAU,OACjEH,SAASC,cAAc,wBAAwBC,MAAMC,QAAU,OAC/DH,SAASC,cAAc,mBAAmBC,MAAMC,QAAU,OAC1DH,SAASC,cAAc,gBAAgBC,MAAMC,QAAU,WACpD,UAgCMC,sBAC2C,QAA5CJ,SAASC,cAAc,YAAYI,OACnCL,SAASC,cAAc,wBAAwBC,MAAMC,QAAU,OAC/DH,SAASC,cAAc,mBAAmBC,MAAMC,QAAU,QAC1DH,SAASC,cAAc,mBAAmBC,MAAMC,QAAU,OAC1DH,SAASC,cAAc,yBAAyBC,MAAMC,QAAU,OAChEH,SAASC,cAAc,uBAAuBC,MAAMC,QAAU,OAC9DH,SAASC,cAAc,kBAAkBC,MAAMC,QAAU,OACzDH,SAASC,cAAc,uBAAuBC,MAAMC,QAAU,OAC9DH,SAASC,cAAc,sBAAsBC,MAAMC,QAAU,OAC7DH,SAASC,cAAc,gBAAgBC,MAAMC,QAAU,UAEvDH,SAASC,cAAc,mBAAmBC,MAAMC,QAAU,OAC1DH,SAASC,cAAc,wBAAwBC,MAAMC,QAAU,QAC/DH,SAASC,cAAc,mBAAmBC,MAAMC,QAAU,OAC1DH,SAASC,cAAc,yBAAyBC,MAAMC,QAAU,OAChEH,SAASC,cAAc,uBAAuBC,MAAMC,QAAU,OAC9DH,SAASC,cAAc,kBAAkBC,MAAMC,QAAU,OACzDH,SAASC,cAAc,uBAAuBC,MAAMC,QAAU,OAC9DH,SAASC,cAAc,sBAAsBC,MAAMC,QAAU,OAC7DH,SAASC,cAAc,gBAAgBC,MAAMC,QAAU,QAlD/DC,sBACAJ,SAASC,cAAc,YAAYK,iBAAiB,UAAUC,IAC1DH,yBAGJI,EAAE,cAAcC,QAAO,eACfC,OAASF,EAAEG,MAAMC,MACrBJ,EAAEK,KAAK,CACHC,OAAQ,OACRC,cAAQC,EAAEC,IAAIC,kDACdnB,KAAM,QAAYW,QAClBS,SAAU,OACVC,QAAS,SAASC,QAEdb,EAAE,iBAAiBc,YACfC,OAASC,KAAKC,MAAMJ,QACrBb,EAAEkB,cAAcH,OAAM,OACrBf,EAAEmB,KAAKJ,OAAM,MAAU,SAAUK,MAAOvB,OACpCG,EAAE,iBAAiBqB,OAAOrB,EAAE,WAAY,CACpCH,MAAOA,MAAK,GACZyB,KAAMzB,MAAK,WAInB0B,MAAM"}